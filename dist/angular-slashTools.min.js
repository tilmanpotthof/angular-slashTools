/*!
 * angular-slashTools v0.1.0-build-sha.ee64dfb | git-version: ee64dfb
 */
angular.module("st",["st.common","st.shortcuts"]),angular.module("st.common",["st.common.util"]),angular.module("st.common.util",["st.common.util.arrayUtils","st.common.util.groupArrayUtils","st.common.util.objectUtils"]),angular.module("st.common.util.arrayUtils",["st.common.util.objectUtils"]).factory("arrayUtils",["objectUtils",function(a){"use strict";var b={inArray:function(a,c,d){b.checkArray(c);var e=c.indexOf(a)>=0;return!e&&d&&angular.isObject(a)?(c.some(function(b){return e=angular.equals(a,b)}),e):e},addOnce:function(a,c,d){return b.checkArray(c),b.inArray(a,c,d)?!1:(c.push(a),!0)},remove:function(a,b,c){var d=-1;return c?b.some(function(b,c){return angular.equals(a,b)?(d=c,!0):void 0}):d=b.indexOf(a),d>=0&&b.splice(d,1),b},checkArray:function(a){if(!angular.isArray(a))throw new Error("Expected an array but got "+a)},extractPropertiesFromArray:function(c,d){b.checkArray(c);var e={},f=[];return c.forEach(function(c){var g=a.getProperty(c,d);void 0!==g&&null!==g&&(angular.isString(g)?void 0===e[g]&&(e[g]=!0,f.push(g)):b.addOnce(g,f,!0))}),f}};return b}]),angular.module("st.common.util.groupArrayUtils",["st.common.util.objectUtils","st.common.util.arrayUtils"]).factory("groupArrayUtils",["objectUtils","arrayUtils",function(a,b){"use strict";var c={group:function(d,e){if(b.checkArray(d),angular.isArray(e))return c._groupByMultipleDefs(d,e);var f={},g=[],h=e.by,i=e.as||h,j=e.in;return d.forEach(function(b){var c,d=a.getProperty(b,h);void 0===f[d]&&(c={},c[i]=d,c[j]=[],f[d]=c,g.push(c)),f[d][j].push(b)}),g},_groupByMultipleDefs:function(a,d){if(b.checkArray(a),b.checkArray(d),0===d.length)return a;var e=d[0],f=d.slice(1),g=e.in,h=c.group(a,e);return h.forEach(function(a){a[g]=c._groupByMultipleDefs(a[g],f)}),h}};return c}]),function(){"use strict";angular.module("st.common.util.objectUtils",[]).factory("objectUtils",[function(){return{getProperty:function(a,b){var c=b.split(".");return c.forEach(function(b){void 0!==a&&null!==a&&(a=a[b])}),a},setProperty:function(a,b,c,d){var e=b.split("."),f=e.length-1,g=e.slice(0,f),h=e[f];d=!!d,g.forEach(function(b,c){if(void 0!==a[b]&&null!==a[b])a=a[b];else{if(!d){var f=e[c+1],g="Cannot set '"+f+"' to non existing property '"+b+"'. To create properties set createProperty=true";throw new Error(g)}a=a[b]={}}}),a[h]=c}}}])}(),angular.module("st.shortcuts",["st.shortcuts.shortcut","st.shortcuts.shortcutParser","st.shortcuts.shortcutRegistry"]),angular.module("st.shortcuts.shortcut",["st.shortcuts.shortcutRegistry"]).directive("shortcut",["$parse","$log","shortcutRegistry",function(a,b,c){"use strict";return{restrict:"A,E",link:function(a,b,d){var e,f;if(b.is("shortcut")){if(!d.keys)throw new Error("Attribute 'keys' is required for the shortcut directive.");f=d.keys.toLowerCase()}else f=d.shortcut.toLowerCase();d.action&&(e=function(c){a.$eval(d.action,{$target:jQuery(c.target),$element:b}),a.$apply()}),d.shortcutTrigger&&(e=function(){b.trigger(d.shortcutTrigger)});var g={preventDefault:a.$eval(d.preventDefault),stopPropagation:a.$eval(d.stopPropagation),exclude:d.exclude,includeOnly:d.includeOnly,notation:f,description:d.shortcutDescription||d.description};d.hasOwnProperty("shortcutAddTooltip")&&b.tooltip(jQuery.extend({title:d.shortcut.toUpperCase(),placement:"right",delay:{show:2e3,hide:0}},a.$eval(d.shortcutAddTooltip)));var h=c.register(f,e,g);a.$on("$destroy",function(){c.unregister(h)})}}}]),function(){"use strict";function a(a,b,c,d){if(b=b||{},d=jQuery.extend({},f,d),this.keyCode=e[a.toLowerCase()],void 0===this.keyCode)throw new Error("No keyCode known for key: '"+a+"'");this.altKey=b.alt||!1,this.shiftKey=b.shift||!1,this.metaKey=b.meta||b.cmd||!1,this.ctrlKey=b.ctrl||!1,this.action=c,this.preventDefault=d.preventDefault,this.stopPropagation=d.stopPropagation,this.exclude=d.exclude,this.includeOnly=d.includeOnly,this.notation=d.notation,this.description=d.description}var b="alt|ctrl|meta|shift|cmd",c=b.split("|"),d=/^((alt|ctrl|meta|shift|cmd)\+)*([a-zA-Z0-9]|enter|esc|left|right|up|down|num[0-9])$/,e={enter:13,esc:27,left:37,up:38,right:39,down:40,0:48,1:49,2:50,3:51,4:52,5:53,6:54,7:55,8:56,9:57,num0:96,num1:97,num2:98,num3:99,num4:100,num5:101,num6:102,num7:103,num8:104,num9:105,a:65,b:66,c:67,d:68,e:69,f:70,g:71,h:72,i:73,j:74,k:75,l:76,m:77,n:78,o:79,p:80,q:81,r:82,s:83,t:84,u:85,v:86,w:87,x:88,y:89,z:90},f={preventDefault:!0,stopPropagation:!1,exclude:"input, textarea",includeOnly:""};a.prototype={match:function(a){return this.keyCode===a.keyCode&&this.altKey===a.altKey&&this.shiftKey===a.shiftKey&&this.metaKey===a.metaKey&&this.ctrlKey===a.ctrlKey&&this._checkTarget(a)},_checkTarget:function(a){var b=jQuery(a.target);return this.includeOnly?b.is(this.includeOnly):!(this.exclude&&b.is(this.exclude))}},angular.module("st.shortcuts.shortcutParser",["st.common.util.arrayUtils"]).factory("shortcutParser",["arrayUtils",function(b){return{create:function(b,c,d,e){return angular.isObject(c)?new a(b,c,d,e):this.parse(b,d,e)},checkNotation:function(a){return d.test(a)},parse:function(a,e,f){var g=d.exec((a||"").toLowerCase());if(g){var h=g[3],i=a.split("+"),j={};return i.forEach(function(a){b.inArray(a,c)&&(j[a]=!0)}),angular.isObject(f)&&(f.notation=a),this.create(h,j,e,f)}throw new Error("Shortcut notation not correct: '"+a+"'")}}}])}(),angular.module("st.shortcuts.shortcutRegistry",["st.common.util.arrayUtils","st.shortcuts.shortcutParser"]).factory("shortcutRegistry",["$log","shortcutParser","arrayUtils",function(a,b,c){"use strict";function d(b){angular.forEach(e,function(c){c.match(b)&&(a.debug("shortcut: "+c.notation),c.action(b),c.preventDefault&&b.preventDefault(),c.stopPropagation&&b.stopPropagation())})}var e=[];return jQuery(document).on("keydown",d),{register:function(a,c,d){var f=b.parse(a,c,d);return e.push(f),f},unregister:function(a){c.remove(a,e)},displayData:function(){return e.map(function(a){return{keys:a.notation,description:a.description}})},getAll:function(){return angular.copy(e)}}}]);